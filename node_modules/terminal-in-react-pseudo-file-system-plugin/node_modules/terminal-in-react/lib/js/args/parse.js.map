{"version":3,"sources":["../../../src/js/args/parse.js"],"names":["Object","assign","config","help","option","command","showHelp","raw","slice","minimist","version","checkVersion","parent","_","h","isDefined","getOptions","shift","sub","runCommand"],"mappings":"4TAEe,aAAyB,CAEtCA,OAAOC,MAAP,CAAc,KAAKC,MAAnB,GAFsC,CAIlC,KAAKA,MAAL,CAAYC,IAJsB,GAMpC,KAAKC,MAAL,CAAY,MAAZ,CAAoB,0BAApB,CANoC,CAOpC,KAAKC,OAAL,CAAa,MAAb,CAAqB,cAArB,CAAqC,KAAKC,QAA1C,CAPoC,EAWtC,KAAKC,GAAL,CAAW,cAAO,EAAKC,KAAL,CAAW,CAAX,CAAP,CAAsB,KAAKN,MAAL,CAAYO,QAAlC,CAX2B,CAclC,KAAKP,MAAL,CAAYQ,OAdsB,EAepC,KAAKC,YAAL,CAAkB,KAAKC,MAAvB,CAfoC,CAkBtC,GAAM,GAAa,KAAKL,GAAL,CAASM,CAAT,CAAW,CAAX,CAAnB,CACM,EAAgB,KAAKN,GAAL,CAASO,CAAT,EAAc,KAAKP,GAAL,CAASJ,IAD7C,CAGM,IAHN,CAIM,EAAU,KAAKY,SAAL,GAA2B,UAA3B,CAJhB,CAKM,EAAa,KAAKC,UAAL,GALnB,CAlBsC,OAyBtChB,OAAOC,MAAP,GAAoB,KAAKM,GAAzB,CAzBsC,CA0BtC,EAAKM,CAAL,CAAOI,KAAP,EA1BsC,CA6BtC,KAAKC,GAAL,CAAW,EAAKL,CA7BsB,KAiCpC,KAAKM,UAAL,KAjCoC,MAuClC,KAAKjB,MAAL,CAAYC,IAAZ,GAvCkC,EAwCpC,KAAKG,QAAL,EAxCoC,GA6CvC,C","file":"parse.js","sourcesContent":["import parser from 'minimist';\n\nexport default function (argv, options) {\n  // Override default option values\n  Object.assign(this.config, options);\n\n  if (this.config.help) {\n    // Register default options and commands\n    this.option('help', 'Output usage information');\n    this.command('help', 'Display help', this.showHelp);\n  }\n\n  // Parse arguments using minimist\n  this.raw = parser(argv.slice(1), this.config.minimist);\n\n  // If default version is allowed, check for it\n  if (this.config.version) {\n    this.checkVersion(this.parent);\n  }\n\n  const subCommand = this.raw._[1];\n  const helpTriggered = this.raw.h || this.raw.help;\n\n  const args = {};\n  const defined = this.isDefined(subCommand, 'commands');\n  const optionList = this.getOptions(defined);\n\n  Object.assign(args, this.raw);\n  args._.shift();\n\n  // Export sub arguments of command\n  this.sub = args._;\n\n  // If sub command is defined, run it\n  if (defined) {\n    this.runCommand(defined, optionList);\n    return {};\n  }\n\n  // Show usage information if \"help\" or \"h\" option was used\n  // And respect the option related to it\n  if (this.config.help && helpTriggered) {\n    this.showHelp();\n  }\n\n  // Hand back list of options\n  return optionList;\n}\n"]}