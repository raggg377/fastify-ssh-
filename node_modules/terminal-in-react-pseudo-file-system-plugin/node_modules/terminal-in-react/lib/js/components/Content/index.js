(function(a,b){if('function'==typeof define&&define.amd)define(['exports','react','prop-types','whatkey','./styled-elements'],b);else if('undefined'!=typeof exports)b(exports,require('react'),require('prop-types'),require('whatkey'),require('./styled-elements'));else{var c={exports:{}};b(c.exports,a.React,a.propTypes,a.whatkey,a.styledElements),a.index=c.exports}})(this,function(a,b,c,d,e){'use strict';function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function h(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function i(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,'__esModule',{value:!0});var j,k,l=f(b),m=f(c),n=f(d),o=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},p=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=(k=j=function(a){function b(){var a,c,f,e;g(this,b);for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];return e=(c=(f=h(this,(a=b.__proto__||Object.getPrototypeOf(b)).call.apply(a,[this].concat(j))),f),f.state={summary:[],promptPrefix:'',history:[],historyCounter:0,input:[],keyInputs:[],canScroll:!0},f.componentWillMount=function(){var a=f.context.instances.find(function(a){return a.index===f.props.id});a&&f.setState(a.oldData)},f.componentDidMount=function(){f.focusInput();var a=f.context.instances.find(function(a){return a.index===f.props.id});f.unregister=f.props.register(f),a&&0!==Object.keys(a.oldData).length||f.handleChange({target:{value:'show'},key:'Enter',dontShowCommand:!0})},f.componentDidUpdate=function(){null!==f.inputWrapper&&f.inputWrapper.scrollIntoView(!1)},f.setScrollPosition=function(a){setTimeout(function(){null!==f.contentWrapper&&(f.contentWrapper.scrollTop=a)},50)},f.focusInput=function(){null!==f.com&&f.com.focus()},f.handleChange=function(a){f.props.handleChange(f,a)},f.handleKeyPress=function(a){f.props.handlerKeyPress(f,a,f.com)},f.handleOuterKeypress=function(a){var b=(0,n.default)(a).key;0>d.unprintableKeys.indexOf(b)?document.activeElement!==f.com&&(f.com.focus(),f.com.value+=(0,n.default)(a).char):-1<['up','down','left','right','enter'].indexOf(b)&&f.com.focus()},c),h(f,e)}return i(b,a),p(b,[{key:'componentWillUnmount',value:function(){this.unregister(this.state)}},{key:'render',value:function(){var a=this,b=this.props.id,c=this.context,d=c.symbol,f=c.maximise,g=c.activeTab,h=c.barShowing,i=c.tabsShowing;if(b!==g)return null;var j=this.state.summary.map(function(a,b){return'string'==typeof a&&0===a.length?l.default.createElement(e.OutputLine,{key:b},'\xA0'):l.default.createElement(e.PreOutputLine,{key:b},a)}),k=30;return h||(k-=30),i&&(k+=30),l.default.createElement(e.ContainerMain,{style:o({},f?{maxWidth:'100%',maxHeight:'calc(100% - '+k+'px)'}:{},this.state.canScroll?{overflowY:'auto'}:{overflowY:'hidden'}),tabIndex:'0',onKeyUp:this.handleOuterKeypress,innerRef:function(b){return a.contentWrapper=b}},l.default.createElement(e.Holder,null,l.default.createElement(e.ContainerContent,null,l.default.createElement(e.InputArea,null,j,l.default.createElement(e.Input,{innerRef:function(b){return a.inputWrapper=b}},l.default.createElement(e.Prompt,null,this.state.promptPrefix+d),l.default.createElement(e.MainInput,{type:'text',tabIndex:'-1',innerRef:function(b){return a.com=b},onKeyPress:this.handleChange,onKeyDown:this.handleKeyPress}))))))}}]),b}(b.Component),j.displayName='Content',j.propTypes={id:m.default.string,oldData:m.default.object,register:m.default.func,handleChange:m.default.func,handlerKeyPress:m.default.func.isRequired},j.defaultProps={oldData:{}},j.contextTypes={symbol:m.default.string,maximise:m.default.bool,instances:m.default.array,activeTab:m.default.string,barShowing:m.default.bool,tabsShowing:m.default.bool},k);a.default=q});
//# sourceMappingURL=index.js.map